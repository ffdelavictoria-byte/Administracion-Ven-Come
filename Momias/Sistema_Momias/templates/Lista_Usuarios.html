{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Reclutas | Momias</title>
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Patrick+Hand&display=swap" rel="stylesheet">
    <style>
        :root { 
            --puebla-yellow: #FFD700; --puebla-blue: #1A237E; 
            --puebla-magenta: #9D174D; --comic-border: #000000;
            --btn-edit: #4CAF50; --btn-delete: #ff4444;
            --badge-super: #673AB7;
        }
        body { font-family: 'Patrick Hand', cursive; background-color: var(--puebla-yellow); padding: 20px; text-align: center; }
        .container { background: white; border: 4px solid var(--comic-border); border-radius: 20px; box-shadow: 10px 10px 0px var(--comic-border); max-width: 800px; margin: 40px auto; padding: 20px; }
        h1 { font-family: 'Bangers', cursive; color: var(--puebla-blue); font-size: 3rem; margin-bottom: 10px; text-shadow: 2px 2px 0px #fff; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th { font-family: 'Bangers', cursive; font-size: 1.5rem; border-bottom: 3px solid var(--comic-border); padding: 10px; color: var(--puebla-blue); }
        td { padding: 15px; font-size: 1.2rem; border-bottom: 1px solid #ddd; vertical-align: middle; }
        
        /* Badges */
        .badge-admin {
            background: var(--badge-super); color: white; font-size: 0.7rem; padding: 2px 8px;
            border-radius: 5px; font-family: 'Bangers', cursive; vertical-align: middle; margin-left: 5px;
        }

        /* Botones Estilo C√≥mic */
        .btn-action { 
            display: inline-block; padding: 8px 15px; border: 2px solid var(--comic-border); 
            border-radius: 8px; text-decoration: none; font-family: 'Bangers', cursive; 
            font-size: 1rem; color: white; transition: 0.2s; box-shadow: 3px 3px 0px var(--comic-border);
            margin: 2px;
        }
        .btn-edit { background: var(--btn-edit); }
        .btn-delete { background: var(--btn-delete); }
        
        .btn-action:hover { transform: scale(1.05); filter: brightness(1.1); color: white; }
        .btn-action:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0px var(--comic-border); }

        .btn-back { display: inline-block; margin-top: 20px; color: var(--puebla-blue); text-decoration: none; font-weight: bold; transition: 0.3s; }
        .btn-back:hover { color: var(--puebla-magenta); transform: translateX(-5px); }
        
        .alert { background: #d4edda; color: #155724; padding: 12px; border-radius: 8px; border: 2px solid #155724; margin-bottom: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>RECLUTAS ACTUALES</h1>
        
        {% if messages %}
            {% for message in messages %}
                <div class="alert">üí• {{ message }} üí•</div>
            {% endfor %}
        {% endif %}

        <table>
            <thead>
                <tr>
                    <th style="text-align: left; padding-left: 20px;">Usuario</th>
                    <th>Acciones de Mando</th>
                </tr>
            </thead>
            <tbody>
                {% for u in usuarios %}
                <tr>
                    <td style="text-align: left; padding-left: 20px;">
                        <span style="font-weight: bold; font-size: 1.4rem;">{{ u.username }}</span>
                        {% if u.is_superuser %}
                            <span class="badge-admin">SUPER USER</span>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{% url 'admin_cambiar_password' u.id %}" class="btn-action btn-edit">
                            üîë CAMBIAR CLAVE
                        </a>

                        {% if u.id != request.user.id %}
                        <a href="{% url 'borrar_usuario' u.id %}" 
                           class="btn-action btn-delete" 
                           onclick="return confirm('¬øSeguro que quieres borrar a este recluta? No habr√° vuelta atr√°s desde la tumba.')">
                            üóëÔ∏è BORRAR
                        </a>
                        {% else %}
                        <span style="font-size: 0.8rem; color: #999; font-style: italic;">(Eres t√∫)</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="2">No hay otros reclutas en las filas. El cementerio est√° vac√≠o.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <div style="margin-top: 30px; border-top: 2px dashed var(--comic-border); padding-top: 20px;">
            <a href="{% url 'main' %}" class="btn-back">‚Üê VOLVER AL CUARTEL GENERAL</a>
        </div>
    </div>
</body>
</html>